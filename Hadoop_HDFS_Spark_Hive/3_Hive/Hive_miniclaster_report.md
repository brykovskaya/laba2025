## üôÉ Apache Hive
### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ - Apache Hive 
–ó–∞–¥–∞—á–∞: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—É–¥–µ–Ω—Ç–∞—Ö, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, –∞ –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

–ù–∞ —ç—Ç–æ–º —ç—Ç–∞–ø–µ —É—Å—Ç–∞–Ω–æ–≤–∏–º `bigdata –º–∏–Ω–∏–∫–ª–∞—Å—Ç–µ—Ä`
‚Ä¢	–ü–µ—Ä–≤—ã–µ —Ç—Ä–∏ –∫–æ–º–∞–Ω–¥—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç –≤ –≤—ã–±—Ä–∞–Ω–Ω—É—é –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é —Ç—Ä–∏ Git-—Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Å —Ñ–∞–π–ª–∞–º–∏ docker-compose.yml. –ö–∞–∂–¥—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π - —ç—Ç–æ –±—É–¥—É—â–∏–π Docker-–æ–±—Ä–∞–∑ Big Data-—Ä–µ—à–µ–Ω–∏—è –æ—Ç Apache, –∫–æ—Ç–æ—Ä—ã–π —Ä–∞–∑–≤–µ—Ä–Ω—ë–º.<br>
![](./images/1.png)<br>
![](./images/2.png)<br>
![](./images/3.png)<br>
–ó–∞–ø—É—Å–∫–∞—é Docker Desktop
–∏ –ø–æ—Å–ª–µ `docker run -it -p 8889:8889 --name hue_ui -d gethue/hue:latest`
![](./images/4.png)<br>

–ò—Å–ø–æ–ª—å–∑—É–µ–º –∫–æ–º–∞–Ω–¥—É `docker-compose up -d` –¥–ª—è —Ä–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ. –ö–æ–º–∞–Ω–¥–∞ Docker Compose –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–ø—É—Å–∫–∞—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.  –ü—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ —ç—Ç–æ–π –æ–ø—Ü–∏–∏ –∫–æ–º–∞–Ω–¥–∞ –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è —Å—Ä–∞–∑—É –ø–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤, –∏ –æ–Ω–∏ –±—É–¥—É—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ.  
–°–ø–µ—Ä–≤–∞ –ø–µ—Ä–µ–π–¥—É –≤ –ø–∞–ø–∫—É docker-hadoop-2nodes 
 - cd docker-hadoop-2nodes
 - docker-compose up -d<br>

![](./images/8.png)<br>
–∑–∞—Ç–µ–º –≤ –ø–∞–ø–∫—É docker-spark-mini
 - cd ..
 - cd docker-spark-mini
 - docker-compose up -d<br>
 
![](./images/7.png)<br>

—á—Ç–æ–±—ã –ø—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å —Å–µ—Ä–¥—Ü–∞ BigData-—Å–µ–º–µ–π—Å—Ç–≤–∞ Hadoop, –≤–≤–µ–¥–∏—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∞–¥—Ä–µ—Å http://localhost:9870/ –∏ –ø–µ—Ä–µ–¥ –≤–∞–º–∏ –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –≥–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å–µ—Ä–≤–µ—Ä–∞ Apache Hadoop:
–ò –µ—Å–ª–∏ —É –≤–∞—Å –∑–∞–ø—É—â–µ–Ω Spark —Å Hive, —ç—Ç–æ –≥–æ–≤–æ—Ä–∏—Ç –æ —Ç–æ–º, —á—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –Ω–∞–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã —É—Å–ø–µ—à–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∏ –∑–∞–ø—É—â–µ–Ω—ã.

![](./images/9.png)<br>

http://172.17.1.49:10002/

http://172.17.1.49:8088/cluster


http://localhost:8889/hue/editor?type=hive

![](./images/5.png)<br>
![](./images/6.png)<br>

http://localhost:8089/cluster

![](./images/10.png)<br>

### –£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ - Apache Hive 
–ó–∞–¥–∞—á–∞: –°–æ–∑–¥–∞–π—Ç–µ —Ç–∞–±–ª–∏—Ü—É –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å—Ç—É–¥–µ–Ω—Ç–∞—Ö, –∑–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ, –∞ –∑–∞—Ç–µ–º –≤—ã–ø–æ–ª–Ω–∏—Ç–µ –Ω–µ—Å–∫–æ–ª—å–∫–æ –∑–∞–ø—Ä–æ—Å–æ–≤ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞.

–§–∞–π–ª –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∑–∞–≥—Ä—É–∂–µ–Ω –≤ HDFS, –Ω–µ –ª–µ–∂–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ.
–ü—Ä–∏–º–µ—Ä –∑–∞–≥—Ä—É–∑–∫–∏: hdfs dfs -put ~/students_data.csv /user/hive/warehouse/

–í—ã–≥—Ä—É–∂–∞—é –≤ hive –¥–∞–Ω–Ω—ã–µ –∏–∑ –¥—Ä—É–≥–æ–π –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
```
C:\Users\79181\docker\bigdata>docker cp students_data.csv hive-server:/tmp/students.csv
C:\Users\79181\docker\bigdata>docker exec -it hive-server /bin/bash
```
–ó–∞–ø—É—Å–∫ hive, —Å–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã
```
beeline -u jdbc:hive2://localhost:10000
CREATE TABLE students (

student_id INT,
name STRING,
age INT,
major STRING,
enrollment_date DATE)
ROW FORMAT DELIMITED
FIELDS TERMINATED BY ','
STORED AS TEXTFILE;
```
–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö, –∑–∞–ø—Ä–æ—Å—ã.
```
LOAD DATA INPATH '/user/hive/warehouse/students.csv' INTO TABLE students;
SELECT * FROM students LIMIT 10;
```
![](./images/11.png)<br>

```
–ù–∞–π–¥–∏—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å—Ç—É–¥–µ–Ω—Ç–æ–≤ –ø–æ —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ—Å—Ç—è–º.
SELECT major, COUNT(*) as total_students
FROM students
GROUP BY major;
```

![](./images/12.png)<br>

```
–ù–∞–π–¥–∏—Ç–µ —Å—Ä–µ–¥–Ω–∏–π –≤–æ–∑—Ä–∞—Å—Ç —Å—Ç—É–¥–µ–Ω—Ç–æ–≤.
SELECT AVG(age) as average_age
FROM students;
```

![](./images/13.png)<br>